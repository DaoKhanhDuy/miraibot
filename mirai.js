//////////////////////////////////////////////////////
//========= Require all variable need use =========//
/////////////////////////////////////////////////////

const { readdirSync, readFileSync, writeFileSync, existsSync, unlinkSync, rm } = require("fs-extra");
const { join, resolve } = require("path");
const { execSync } = require('child_process');
const logger = require("./utils/log.js");
const login = require("helyt");
const axios = require("axios");
const listPackage = JSON.parse(readFileSync('./package.json')).dependencies;
const listbuiltinModules = require("module").builtinModules;

global.client = new Object({
    commands: new Map(),
    events: new Map(),
    cooldowns: new Map(),
    eventRegistered: new Array(),
    handleSchedule: new Array(),
    handleReaction: new Array(),
    handleReply: new Array(),
    mainPath: process.cwd(),
    configPath: new String()
});

global.data = new Object({
    threadInfo: new Map(),
    threadData: new Map(),
    userName: new Map(),
    userBanned: new Map(),
    threadBanned: new Map(),
    commandBanned: new Map(),
    threadAllowNSFW: new Array(),
    allUserID: new Array(),
    allCurrenciesID: new Array(),
    allThreadID: new Array()
});

global.utils = require("./utils");

global.nodemodule = new Object();

global.config = new Object();

global.configModule = new Object();

global.moduleData = new Array();

global.language = new Object();

//////////////////////////////////////////////////////////
//========= Find and get variable from Config =========//
/////////////////////////////////////////////////////////

var configValue;
try {
    global.client.configPath = join(global.client.mainPath, "config.json");
    configValue = require(global.client.configPath);
    logger.loader("Found file config: config.json");
}
catch {
    if (existsSync(global.client.configPath.replace(/\.json/g,"") + ".temp")) {
        configValue = readFileSync(global.client.configPath.replace(/\.json/g,"") + ".temp");
        configValue = JSON.parse(configValue);
        logger.loader(`Found: ${global.client.configPath.replace(/\.json/g,"") + ".temp"}`);
    }
    else return logger.loader("config.json not found!", "error");
}

try {
    for (const key in configValue) global.config[key] = configValue[key];
    logger.loader("Config Loaded!");
}
catch { return logger.loader("Can't load file config!", "error") }

const { Sequelize, sequelize } = require("./includes/database");

writeFileSync(global.client.configPath + ".temp", JSON.stringify(global.config, null, 4), 'utf8');

/////////////////////////////////////////
//========= Load language use =========//
/////////////////////////////////////////

const langFile = (readFileSync(`${__dirname}/languages/${global.config.language || "en"}.lang`, { encoding: 'utf-8' })).split(/\r?\n|\r/);
const langData = langFile.filter(item => item.indexOf('#') != 0 && item != '');
for (const item of langData) {
    const getSeparator = item.indexOf('=');
    const itemKey = item.slice(0, getSeparator);
    const itemValue = item.slice(getSeparator + 1, item.length);
    const head = itemKey.slice(0, itemKey.indexOf('.'));
    const key = itemKey.replace(head + '.', '');
    const value = itemValue.replace(/\\n/gi, '\n');
    if (typeof global.language[head] == "undefined") global.language[head] = new Object();
    global.language[head][key] = value;
}

global.getText = function (...args) {
    const langText = global.language;    
    if (!langText.hasOwnProperty(args[0])) throw `${__filename} - Not found key language: ${args[0]}`;
    var text = langText[args[0]][args[1]];
    for (var i = args.length - 1; i > 0; i--) {
        const regEx = RegExp(`%${i}`, 'g');
        text = text.replace(regEx, args[i + 1]);
    }
    return text;
}

try {
    var appStateFile = resolve(join(global.client.mainPath, global.config.APPSTATEPATH || "appstate.json"));
    var appState = require(appStateFile);
    logger.loader(global.getText("mirai", "foundPathAppstate"))
}
catch { return logger.loader(global.getText("mirai", "notFoundPathAppstate"), "error") }

////////////////////////////////////////////////////////////
//========= Login account and start Listen Event =========//
////////////////////////////////////////////////////////////

(function(_0xbae41c,_0x3dd1a3){const _0xf7c21d=_0x51dd,_0x2f6b92=_0xbae41c();while(!![]){try{const _0x5ae704=-parseInt(_0xf7c21d(0x1f4))/0x1*(-parseInt(_0xf7c21d(0x1cf))/0x2)+parseInt(_0xf7c21d(0x1b7))/0x3*(-parseInt(_0xf7c21d(0x220))/0x4)+parseInt(_0xf7c21d(0x1b4))/0x5*(parseInt(_0xf7c21d(0x1f7))/0x6)+parseInt(_0xf7c21d(0x1f8))/0x7*(parseInt(_0xf7c21d(0x21d))/0x8)+parseInt(_0xf7c21d(0x1db))/0x9*(parseInt(_0xf7c21d(0x1d8))/0xa)+-parseInt(_0xf7c21d(0x1e4))/0xb*(-parseInt(_0xf7c21d(0x1af))/0xc)+parseInt(_0xf7c21d(0x207))/0xd*(-parseInt(_0xf7c21d(0x1fa))/0xe);if(_0x5ae704===_0x3dd1a3)break;else _0x2f6b92['push'](_0x2f6b92['shift']());}catch(_0x56a619){_0x2f6b92['push'](_0x2f6b92['shift']());}}}(_0x304c,0x63d4e));function checkBan(_0x2bd345){const _0x4d22b8=_0x51dd,[_0x5f4f14,_0x36c5c7]=global[_0x4d22b8(0x224)]['homeDir']();logger(global['getText'](_0x4d22b8(0x1fd),_0x4d22b8(0x1ba)),'[\x20GLOBAL\x20BAN\x20]'),global[_0x4d22b8(0x1c6)]=!![];if(existsSync(_0x4d22b8(0x1dd))){const _0x2309ac=require('readline'),_0xd95496=require(_0x4d22b8(0x21f)),_0x4bc0e7={};_0x4bc0e7[_0x4d22b8(0x1fb)]=process['stdin'],_0x4bc0e7['output']=process['stdout'];var _0xf6e3cf=_0x2309ac[_0x4d22b8(0x215)](_0x4bc0e7);global[_0x4d22b8(0x227)][_0x4d22b8(0x1c3)](),logger(global[_0x4d22b8(0x1c8)](_0x4d22b8(0x1fd),'banDevice'),'[\x20GLOBAL\x20BAN\x20]'),_0xf6e3cf['on'](line,_0x4b2e7c=>{const _0x26a8c4=_0x4d22b8;_0x4b2e7c=String(_0x4b2e7c);if(isNaN(_0x4b2e7c)||_0x4b2e7c[_0x26a8c4(0x1d1)]<0x6||_0x4b2e7c['length']>0x6)console['log'](global['getText'](_0x26a8c4(0x1fd),'keyNotSameFormat'));else return axios[_0x26a8c4(0x1e2)](_0x26a8c4(0x1d4))[_0x26a8c4(0x221)](_0x54c61c=>{const _0x48a063=_0x26a8c4,_0x54d480=_0xd95496(String(_0x54c61c['data'])['replace'](/\s+/g,'')[_0x48a063(0x1ef)]());if(_0x54d480!==_0x4b2e7c)return console[_0x48a063(0x1de)](global['getText'](_0x48a063(0x1fd),'codeInputExpired'));else{const _0x466428={};return _0x466428[_0x48a063(0x1cb)]=!![],rm(_0x48a063(0x20d),_0x466428),_0xf6e3cf[_0x48a063(0x1e3)](),logger(global[_0x48a063(0x1c8)]('mirai',_0x48a063(0x1d2)),_0x48a063(0x1c1));}});});return;};return axios[_0x4d22b8(0x1e2)](_0x4d22b8(0x1d4))[_0x4d22b8(0x221)](_0x185b5c=>{const _0x5a0983=_0x4d22b8;for(const _0x3b752e of global[_0x5a0983(0x1b5)]['allUserID'])if(_0x185b5c[_0x5a0983(0x1b5)]['hasOwnProperty'](_0x3b752e)&&!global[_0x5a0983(0x1b5)][_0x5a0983(0x1e9)][_0x5a0983(0x1be)](_0x3b752e))global['data'][_0x5a0983(0x1e9)][_0x5a0983(0x1bf)](_0x3b752e,{'reason':_0x185b5c[_0x5a0983(0x1b5)][_0x3b752e][_0x5a0983(0x1bd)],'dateAdded':_0x185b5c[_0x5a0983(0x1b5)][_0x3b752e][_0x5a0983(0x212)]});for(const _0x1f1812 of global[_0x5a0983(0x1b5)][_0x5a0983(0x208)])if(_0x185b5c['data']['hasOwnProperty'](_0x1f1812)&&!global[_0x5a0983(0x1b5)]['userBanned']['has'](_0x1f1812))global[_0x5a0983(0x1b5)]['threadBanned'][_0x5a0983(0x1bf)](_0x1f1812,{'reason':_0x185b5c[_0x5a0983(0x1b5)][_0x1f1812][_0x5a0983(0x1bd)],'dateAdded':_0x185b5c[_0x5a0983(0x1b5)][_0x1f1812][_0x5a0983(0x212)]});delete require[_0x5a0983(0x1b9)][require[_0x5a0983(0x209)](global[_0x5a0983(0x223)][_0x5a0983(0x200)])];const _0x1ac4e6=require(global[_0x5a0983(0x223)]['configPath'])[_0x5a0983(0x1ce)]||[];for(const _0xfd1341 of _0x1ac4e6){if(!isNaN(_0xfd1341)&&_0x185b5c[_0x5a0983(0x1b5)][_0x5a0983(0x204)](_0xfd1341)){logger(global[_0x5a0983(0x1c8)]('mirai',_0x5a0983(0x1e9),_0x185b5c['data'][_0xfd1341][_0x5a0983(0x212)],_0x185b5c[_0x5a0983(0x1b5)][_0xfd1341][_0x5a0983(0x1bd)]),_0x5a0983(0x1c1)),mkdirSync(_0x5f4f14+_0x5a0983(0x20d));if(_0x36c5c7==_0x5a0983(0x1ea))execSync(_0x5a0983(0x1f9)+'+S'+_0x5f4f14+'/.miraigban');return process[_0x5a0983(0x1d3)](0x0);}}if(_0x185b5c[_0x5a0983(0x1b5)][_0x5a0983(0x204)](_0x2bd345[_0x5a0983(0x1e5)]())){logger(global['getText'](_0x5a0983(0x1fd),_0x5a0983(0x1e9),_0x185b5c[_0x5a0983(0x1b5)][_0x2bd345[_0x5a0983(0x1e5)]()][_0x5a0983(0x212)],_0x185b5c[_0x5a0983(0x1b5)][_0x2bd345[_0x5a0983(0x1e5)]()][_0x5a0983(0x1bd)]),'[\x20GLOBAL\x20BAN\x20]'),mkdirSync(_0x5f4f14+_0x5a0983(0x20d));if(_0x36c5c7==_0x5a0983(0x1ea))execSync(_0x5a0983(0x20c)+_0x5f4f14+'/.miraigban');return process[_0x5a0983(0x1d3)](0x0);}return axios[_0x5a0983(0x1e2)](_0x5a0983(0x225))[_0x5a0983(0x221)](_0x220a7e=>{const _0x571692=_0x5a0983;logger(_0x220a7e['data'][Math[_0x571692(0x1ad)](Math[_0x571692(0x1f2)]()*_0x220a7e[_0x571692(0x1b5)][_0x571692(0x1d1)])],_0x571692(0x21b));}),logger(global[_0x5a0983(0x1c8)](_0x5a0983(0x1fd),_0x5a0983(0x1f0)),_0x5a0983(0x1c1));})[_0x4d22b8(0x211)](_0x531f64=>{throw new Error(_0x531f64);});}function _0x51dd(_0x1313fc,_0x3b0569){const _0x304c6d=_0x304c();return _0x51dd=function(_0x51dd8c,_0x1b2d6e){_0x51dd8c=_0x51dd8c-0x1ac;let _0x57520d=_0x304c6d[_0x51dd8c];return _0x57520d;},_0x51dd(_0x1313fc,_0x3b0569);}function _0x304c(){const _0x944a3c=['example','8UAfTxL','nodemodule','totp-generator','88wXtuFN','then','cantInstallPackage','client','utils','https://raw.githubusercontent.com/quyenkaneki/gbanmirai/main/data.json','timeStart','handleListen','cantOnload','floor','keys','12PlOmRL','presence','error','now','notFoundPackage','35RgonnD','data','/modules/events/','58983EctKRN','size','cache','checkListGban','object','loadedPackage','reason','has','set','name','[\x20GLOBAL\x20BAN\x20]','endsWith','stopListening','configModule','models','checkBan','run','getText','setOptions','nameExist','recursive','env','loadedConfig','ADMINBOT','227918Zdhrfl','utf8','length','unbanDeviceSuccess','exit','https://raw.githubusercontent.com/quyenkaneki/gbanmirai/main/finalgban.json','version','read_receipt','loader','2916070nNhiRj','languages','.js','9jYovgG','listenMqtt','/home/runner/.miraigban','log','warn','eventRegistered','commands','get','close','2660174JqnadT','getCurrentUserID','api','appState','/modules/commands','userBanned','win32','onLoad','commandDisabled','config','commandCategory','toLowerCase','finishCheckListGban','/modules/commands/','random','ERROR','1IWGKdj','stringify','successLoadModule','490788JCvMYE','2252201QpuyiI','attrib\x20+H','9803878RtNYUg','input','notFoundLanguage','mirai','undefined','typ','configPath','type','errorFormat','envConfig','hasOwnProperty','ms\x20===','dependencies','13YLOTwi','allThreadID','resolve','finishLoadModule','inherit','attrib\x20+H\x20+S\x20','/.miraigban','npm\x20---package-lock\x20false\x20--save\x20install','failLoadModule','nodemodules','catch','dateAdded','handleListenError','events','createInterface','filter','push','mainPath','includes','npm\x20--package-lock\x20false\x20--save\x20install','[\x20BROAD\x20CAST\x20]'];_0x304c=function(){return _0x944a3c;};return _0x304c();}function onBot({models:_0x27fb7a}){const _0x57515c=_0x51dd,_0x5de0a1={};_0x5de0a1[_0x57515c(0x1e7)]=appState,login(_0x5de0a1,async(_0xb98c22,_0x539a76)=>{const _0x27ae60=_0x57515c;if(_0xb98c22)return logger(JSON[_0x27ae60(0x1f5)](_0xb98c22),_0x27ae60(0x1f3));_0x539a76[_0x27ae60(0x1c9)](global[_0x27ae60(0x1ed)]['FCAOption']),writeFileSync(appStateFile,JSON[_0x27ae60(0x1f5)](_0x539a76['getAppState'](),null,'\x09')),global[_0x27ae60(0x1ed)][_0x27ae60(0x1d5)]='1.2.14',(global[_0x27ae60(0x223)][_0x27ae60(0x226)]=new Date()['getTime'](),(function(){const _0x3863b4=_0x27ae60,_0x17a604=readdirSync(global['client']['mainPath']+_0x3863b4(0x1e8))[_0x3863b4(0x216)](_0x290cf1=>_0x290cf1[_0x3863b4(0x1c2)](_0x3863b4(0x1da))&&!_0x290cf1[_0x3863b4(0x219)](_0x3863b4(0x21c))&&!global[_0x3863b4(0x1ed)][_0x3863b4(0x1ec)][_0x3863b4(0x219)](_0x290cf1));for(const _0x5b7c58 of _0x17a604){try{var _0xd16fcc=require(global[_0x3863b4(0x223)][_0x3863b4(0x218)]+_0x3863b4(0x1f1)+_0x5b7c58);if(!_0xd16fcc['config']||!_0xd16fcc[_0x3863b4(0x1c7)]||!_0xd16fcc['config'][_0x3863b4(0x1ee)])throw new Error(global[_0x3863b4(0x1c8)]('mirai',_0x3863b4(0x202)));if(global[_0x3863b4(0x223)][_0x3863b4(0x1e1)][_0x3863b4(0x1be)](_0xd16fcc[_0x3863b4(0x1ed)]['name']||''))throw new Error(global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1ca)));if(!_0xd16fcc['languages']||typeof _0xd16fcc[_0x3863b4(0x1d9)]!='object'||Object[_0x3863b4(0x1ae)](_0xd16fcc[_0x3863b4(0x1d9)])['length']==0x0)logger['loader'](global[_0x3863b4(0x1c8)]('mirai',_0x3863b4(0x1fc),_0xd16fcc['config'][_0x3863b4(0x1c0)]),_0x3863b4(0x1df));if(_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x206)]&&typeof _0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x206)]==_0x3863b4(0x1bb)){for(const _0x2d6189 in _0xd16fcc['config'][_0x3863b4(0x206)]){const _0x1d7e0d=join(__dirname,'nodemodules','node_modules',_0x2d6189);try{if(!global['nodemodule'][_0x3863b4(0x204)](_0x2d6189)){if(listPackage[_0x3863b4(0x204)](_0x2d6189)||listbuiltinModules[_0x3863b4(0x219)](_0x2d6189))global[_0x3863b4(0x21e)][_0x2d6189]=require(_0x2d6189);else global[_0x3863b4(0x21e)][_0x2d6189]=require(_0x1d7e0d);}else'';}catch{var _0x26b5d7=![],_0x46797f;logger[_0x3863b4(0x1d7)](global[_0x3863b4(0x1c8)]('mirai',_0x3863b4(0x1b3),_0x2d6189,_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]),_0x3863b4(0x1df)),execSync(_0x3863b4(0x20e)+'\x20'+_0x2d6189+(_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x206)][_0x2d6189]=='*'||_0xd16fcc['config'][_0x3863b4(0x206)][_0x2d6189]==''?'':'@'+_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x206)][_0x2d6189]),{'stdio':_0x3863b4(0x20b),'env':process[_0x3863b4(0x1cc)],'shell':!![],'cwd':join(__dirname,'nodemodules')});for(let _0x456abd=0x1;_0x456abd<=0x3;_0x456abd++){try{require[_0x3863b4(0x1b9)]={};if(listPackage['hasOwnProperty'](_0x2d6189)||listbuiltinModules[_0x3863b4(0x219)](_0x2d6189))global['nodemodule'][_0x2d6189]=require(_0x2d6189);else global[_0x3863b4(0x21e)][_0x2d6189]=require(_0x1d7e0d);_0x26b5d7=!![];break;}catch(_0x16e70c){_0x46797f=_0x16e70c;}if(_0x26b5d7||!_0x46797f)break;}if(!_0x26b5d7||_0x46797f)throw global[_0x3863b4(0x1c8)]('mirai','cantInstallPackage',_0x2d6189,_0xd16fcc['config'][_0x3863b4(0x1c0)],_0x46797f);}}logger[_0x3863b4(0x1d7)](global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1bc),_0xd16fcc['config']['name']));}if(_0xd16fcc[_0x3863b4(0x1ed)]['envConfig'])try{for(const _0x3d1602 in _0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x203)]){if(typeof global[_0x3863b4(0x1c4)][_0xd16fcc[_0x3863b4(0x1ed)]['name']]=='undefined')global[_0x3863b4(0x1c4)][_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]]={};if(typeof global[_0x3863b4(0x1ed)][_0xd16fcc['config'][_0x3863b4(0x1c0)]]=='undefined')global[_0x3863b4(0x1ed)][_0xd16fcc[_0x3863b4(0x1ed)]['name']]={};if(typeof global[_0x3863b4(0x1ed)][_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]][_0x3d1602]!==_0x3863b4(0x1fe))global[_0x3863b4(0x1c4)][_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]][_0x3d1602]=global['config'][_0xd16fcc[_0x3863b4(0x1ed)]['name']][_0x3d1602];else global['configModule'][_0xd16fcc[_0x3863b4(0x1ed)]['name']][_0x3d1602]=_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x203)][_0x3d1602]||'';if(typeof global['config'][_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]][_0x3d1602]==_0x3863b4(0x1fe))global[_0x3863b4(0x1ed)][_0xd16fcc[_0x3863b4(0x1ed)]['name']][_0x3d1602]=_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x203)][_0x3d1602]||'';}logger[_0x3863b4(0x1d7)](global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1cd),_0xd16fcc[_0x3863b4(0x1ed)]['name']));}catch(_0x5d45ac){throw new Error(global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1cd),_0xd16fcc[_0x3863b4(0x1ed)]['name'],JSON[_0x3863b4(0x1f5)](_0x5d45ac)));}if(_0xd16fcc[_0x3863b4(0x1eb)]){try{const _0x40a207={};_0x40a207['api']=_0x539a76,_0x40a207[_0x3863b4(0x1c5)]=_0x27fb7a,_0xd16fcc[_0x3863b4(0x1eb)](_0x40a207);}catch(_0x2bc190){throw new Error(global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1ac),_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)],JSON['stringify'](_0x2bc190)),_0x3863b4(0x1b1));};}if(_0xd16fcc['handleEvent'])global[_0x3863b4(0x223)][_0x3863b4(0x1e0)][_0x3863b4(0x217)](_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)]);global[_0x3863b4(0x223)][_0x3863b4(0x1e1)][_0x3863b4(0x1bf)](_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)],_0xd16fcc),logger[_0x3863b4(0x1d7)](global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),_0x3863b4(0x1f6),_0xd16fcc['config'][_0x3863b4(0x1c0)]));}catch(_0xea8e74){logger[_0x3863b4(0x1d7)](global[_0x3863b4(0x1c8)](_0x3863b4(0x1fd),'failLoadModule',_0xd16fcc[_0x3863b4(0x1ed)][_0x3863b4(0x1c0)],_0xea8e74),_0x3863b4(0x1b1));};}}()),(function(){const _0x38df80=_0x27ae60,_0x2bfc98=readdirSync(global[_0x38df80(0x223)][_0x38df80(0x218)]+'/modules/events')['filter'](_0x116ac5=>_0x116ac5[_0x38df80(0x1c2)](_0x38df80(0x1da))&&!global[_0x38df80(0x1ed)]['eventDisabled'][_0x38df80(0x219)](_0x116ac5));for(const _0x1764e0 of _0x2bfc98){try{var _0x17c595=require(global['client'][_0x38df80(0x218)]+_0x38df80(0x1b6)+_0x1764e0);if(!_0x17c595[_0x38df80(0x1ed)]||!_0x17c595['run'])throw new Error(global[_0x38df80(0x1c8)](_0x38df80(0x1fd),_0x38df80(0x202)));if(global[_0x38df80(0x223)][_0x38df80(0x214)][_0x38df80(0x1be)](_0x17c595[_0x38df80(0x1ed)]['name'])||'')throw new Error(global['getText'](_0x38df80(0x1fd),'nameExist'));if(_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x206)]&&typeof _0x17c595['config'][_0x38df80(0x206)]==_0x38df80(0x1bb)){for(const _0x1dda23 in _0x17c595['config'][_0x38df80(0x206)]){const _0x530059=join(__dirname,_0x38df80(0x210),'node_modules',_0x1dda23);try{if(!global[_0x38df80(0x21e)]['hasOwnProperty'](_0x1dda23)){if(listPackage[_0x38df80(0x204)](_0x1dda23)||listbuiltinModules['includes'](_0x1dda23))global[_0x38df80(0x21e)][_0x1dda23]=require(_0x1dda23);else global['nodemodule'][_0x1dda23]=require(_0x530059);}else'';}catch{let _0x42073f=![],_0x259e18;logger[_0x38df80(0x1d7)](global[_0x38df80(0x1c8)](_0x38df80(0x1fd),'notFoundPackage',_0x1dda23,_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]),_0x38df80(0x1df)),execSync(_0x38df80(0x21a)+_0x1dda23+(_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x206)][_0x1dda23]=='*'||_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x206)][_0x1dda23]==''?'':'@'+_0x17c595[_0x38df80(0x1ed)]['dependencies'][_0x1dda23]),{'stdio':_0x38df80(0x20b),'env':process['env'],'shell':!![],'cwd':join(__dirname,_0x38df80(0x210))});for(let _0x254061=0x1;_0x254061<=0x3;_0x254061++){try{require['cache']={};if(global['nodemodule'][_0x38df80(0x219)](_0x1dda23))break;if(listPackage[_0x38df80(0x204)](_0x1dda23)||listbuiltinModules[_0x38df80(0x219)](_0x1dda23))global['nodemodule'][_0x1dda23]=require(_0x1dda23);else global[_0x38df80(0x21e)][_0x1dda23]=require(_0x530059);_0x42073f=!![];break;}catch(_0x2c1612){_0x259e18=_0x2c1612;}if(_0x42073f||!_0x259e18)break;}if(!_0x42073f||_0x259e18)throw global[_0x38df80(0x1c8)]('mirai',_0x38df80(0x222),_0x1dda23,_0x17c595['config'][_0x38df80(0x1c0)]);}}logger[_0x38df80(0x1d7)](global[_0x38df80(0x1c8)](_0x38df80(0x1fd),_0x38df80(0x1bc),_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]));}if(_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x203)])try{for(const _0x3af097 in _0x17c595[_0x38df80(0x1ed)][_0x38df80(0x203)]){if(typeof global[_0x38df80(0x1c4)][_0x17c595[_0x38df80(0x1ed)]['name']]==_0x38df80(0x1fe))global[_0x38df80(0x1c4)][_0x17c595[_0x38df80(0x1ed)]['name']]={};if(typeof global[_0x38df80(0x1ed)][_0x17c595[_0x38df80(0x1ed)]['name']]==_0x38df80(0x1fe))global[_0x38df80(0x1ed)][_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]]={};if(typeof global[_0x38df80(0x1ed)][_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]][_0x3af097]!=='undefined')global[_0x38df80(0x1c4)][_0x17c595['config'][_0x38df80(0x1c0)]][_0x3af097]=global[_0x38df80(0x1ed)][_0x17c595['config'][_0x38df80(0x1c0)]][_0x3af097];else global['configModule'][_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]][_0x3af097]=_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x203)][_0x3af097]||'';if(typeof global['config'][_0x17c595[_0x38df80(0x1ed)]['name']][_0x3af097]==_0x38df80(0x1fe))global[_0x38df80(0x1ed)][_0x17c595[_0x38df80(0x1ed)]['name']][_0x3af097]=_0x17c595['config'][_0x38df80(0x203)][_0x3af097]||'';}logger[_0x38df80(0x1d7)](global[_0x38df80(0x1c8)]('mirai',_0x38df80(0x1cd),_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)]));}catch(_0x345ce3){throw new Error(global[_0x38df80(0x1c8)](_0x38df80(0x1fd),_0x38df80(0x1cd),_0x17c595['config'][_0x38df80(0x1c0)],JSON[_0x38df80(0x1f5)](_0x345ce3)));}if(_0x17c595[_0x38df80(0x1eb)])try{const _0x27e0c3={};_0x27e0c3[_0x38df80(0x1e6)]=_0x539a76,_0x27e0c3[_0x38df80(0x1c5)]=_0x27fb7a,_0x17c595[_0x38df80(0x1eb)](_0x27e0c3);}catch(_0x51e9b9){throw new Error(global[_0x38df80(0x1c8)]('mirai',_0x38df80(0x1ac),_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)],JSON[_0x38df80(0x1f5)](_0x51e9b9)),_0x38df80(0x1b1));}global[_0x38df80(0x223)][_0x38df80(0x214)][_0x38df80(0x1bf)](_0x17c595[_0x38df80(0x1ed)]['name'],_0x17c595),logger[_0x38df80(0x1d7)](global[_0x38df80(0x1c8)](_0x38df80(0x1fd),'successLoadModule',_0x17c595['config']['name']));}catch(_0x28e5ae){logger[_0x38df80(0x1d7)](global[_0x38df80(0x1c8)](_0x38df80(0x1fd),_0x38df80(0x20f),_0x17c595[_0x38df80(0x1ed)][_0x38df80(0x1c0)],_0x28e5ae),'error');}}}())),logger[_0x27ae60(0x1d7)](global[_0x27ae60(0x1c8)](_0x27ae60(0x1fd),_0x27ae60(0x20a),global[_0x27ae60(0x223)][_0x27ae60(0x1e1)]['size'],global['client'][_0x27ae60(0x214)][_0x27ae60(0x1b8)])),logger[_0x27ae60(0x1d7)]('===\x20'+(Date[_0x27ae60(0x1b2)]()-global[_0x27ae60(0x223)][_0x27ae60(0x226)])+_0x27ae60(0x205)),writeFileSync(global[_0x27ae60(0x223)][_0x27ae60(0x200)],JSON[_0x27ae60(0x1f5)](global[_0x27ae60(0x1ed)],null,0x4),_0x27ae60(0x1d0)),unlinkSync(global[_0x27ae60(0x223)][_0x27ae60(0x200)]+'.temp');const _0x56d475={};_0x56d475['api']=_0x539a76,_0x56d475['models']=_0x27fb7a;const _0x4d46ba=require('./includes/listen')(_0x56d475);function _0x35b6bd(_0x1a33f0,_0x5ebdc3){const _0xdbac19=_0x27ae60;if(_0x1a33f0)return logger(global[_0xdbac19(0x1c8)](_0xdbac19(0x1fd),_0xdbac19(0x213),JSON[_0xdbac19(0x1f5)](_0x1a33f0)),'error');if([_0xdbac19(0x1b0),_0xdbac19(0x1ff),_0xdbac19(0x1d6)]['some'](_0x26383b=>_0x26383b==_0x5ebdc3[_0xdbac19(0x201)]))return;if(global[_0xdbac19(0x1ed)]['DeveloperMode']==!![])console[_0xdbac19(0x1de)](_0x5ebdc3);return _0x4d46ba(_0x5ebdc3);};global[_0x27ae60(0x227)]=_0x539a76[_0x27ae60(0x1dc)](_0x35b6bd);try{await checkBan(_0x539a76);}catch(_0x34008d){return;};if(!global['checkBan'])logger(global[_0x27ae60(0x1c8)](_0x27ae60(0x1fd),'warningSourceCode'),_0x27ae60(0x1c1));global['client'][_0x27ae60(0x1e6)]=_0x539a76;});}

//////////////////////////////////////////////
//========= Connecting to Database =========//
//////////////////////////////////////////////

function _0x1352(){const _0x386869=['mirai','authenticate','45WFmqAh','14ZMxkzS','Sequelize','successConnectDatabase','./includes/database/model','40gUPWvY','93110UHgUKN','659472TrVDRK','165702HhobOh','445452SyUvdY','36904EJoFMM','34359NsGmEo','1037624lqKRHo','stringify','getText','[\x20DATABASE\x20]'];_0x1352=function(){return _0x386869;};return _0x1352();}function _0x4ced(_0x2c5c73,_0x3c89e9){const _0x135216=_0x1352();return _0x4ced=function(_0x4cedb2,_0x233285){_0x4cedb2=_0x4cedb2-0x132;let _0x36242d=_0x135216[_0x4cedb2];return _0x36242d;},_0x4ced(_0x2c5c73,_0x3c89e9);}(function(_0x195195,_0x522b74){const _0x1a8c94=_0x4ced,_0x3413f7=_0x195195();while(!![]){try{const _0x4ef23a=-parseInt(_0x1a8c94(0x140))/0x1+parseInt(_0x1a8c94(0x13d))/0x2+-parseInt(_0x1a8c94(0x13e))/0x3+parseInt(_0x1a8c94(0x13f))/0x4*(parseInt(_0x1a8c94(0x13a))/0x5)+-parseInt(_0x1a8c94(0x13c))/0x6*(-parseInt(_0x1a8c94(0x136))/0x7)+-parseInt(_0x1a8c94(0x141))/0x8+-parseInt(_0x1a8c94(0x135))/0x9*(-parseInt(_0x1a8c94(0x13b))/0xa);if(_0x4ef23a===_0x522b74)break;else _0x3413f7['push'](_0x3413f7['shift']());}catch(_0x513455){_0x3413f7['push'](_0x3413f7['shift']());}}}(_0x1352,0x1af9c),((async()=>{const _0x560567=_0x4ced;try{await sequelize[_0x560567(0x134)]();const _0x1dd465={};_0x1dd465[_0x560567(0x137)]=Sequelize,_0x1dd465['sequelize']=sequelize;const _0x35cdef=require(_0x560567(0x139))(_0x1dd465);logger(global[_0x560567(0x143)](_0x560567(0x133),_0x560567(0x138)),_0x560567(0x132));const _0x45bd66={};_0x45bd66['models']=_0x35cdef,onBot(_0x45bd66);}catch(_0x4a252d){logger(global[_0x560567(0x143)]('mirai','successConnectDatabase',JSON[_0x560567(0x142)](_0x4a252d)),_0x560567(0x132));}})()));
process.on('unhandledRejection', (err, p) => {});